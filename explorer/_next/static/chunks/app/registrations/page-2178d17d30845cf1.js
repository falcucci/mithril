(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[480],{3195:function(e,t,r){Promise.resolve().then(r.bind(r,4080))},4080:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return F}});var n=r(7437),s=r(4033),a=r(2265),i=r(3198),l=r(851),o=r(3513),c=r(4440),d=r.n(c),h=r(4061),u=r(5113),g=r(7127),x=r(4617);let f=(0,x.Z)("h4");f.displayName="DivStyledAsH4";let p=a.forwardRef(({className:e,bsPrefix:t,as:r=f,...s},a)=>(t=(0,g.vE)(t,"alert-heading"),(0,n.jsx)(r,{ref:a,className:d()(e,t),...s})));p.displayName="AlertHeading";var j=r(4226);let v=a.forwardRef(({className:e,bsPrefix:t,as:r=j.Z,...s},a)=>(t=(0,g.vE)(t,"alert-link"),(0,n.jsx)(r,{ref:a,className:d()(e,t),...s})));v.displayName="AlertLink";var b=r(2525),k=r(5754);let m=a.forwardRef((e,t)=>{let{bsPrefix:r,show:s=!0,closeLabel:a="Close alert",closeVariant:i,className:l,children:o,variant:c="primary",onClose:x,dismissible:f,transition:p=b.Z,...j}=(0,h.Ch)(e,{show:"onClose"}),v=(0,g.vE)(r,"alert"),m=(0,u.Z)(e=>{x&&x(!1,e)}),y=!0===p?b.Z:p,Z=(0,n.jsxs)("div",{role:"alert",...y?void 0:j,ref:t,className:d()(l,v,c&&`${v}-${c}`,f&&`${v}-dismissible`),children:[f&&(0,n.jsx)(k.Z,{onClick:m,"aria-label":a,variant:i}),o]});return y?(0,n.jsx)(y,{unmountOnExit:!0,...j,ref:void 0,in:s,children:Z}):s?Z:null});m.displayName="Alert";var y=Object.assign(m,{Link:v,Heading:p});let Z=a.forwardRef(({bsPrefix:e,size:t,vertical:r=!1,className:s,role:a="group",as:i="div",...l},o)=>{let c=(0,g.vE)(e,"btn-group"),h=c;return r&&(h=`${c}-vertical`),(0,n.jsx)(i,{...l,ref:o,role:a,className:d()(s,h,t&&`${c}-${t}`)})});Z.displayName="ButtonGroup";var w=r(4434),S=r(8597);let N=a.forwardRef(({bsPrefix:e,variant:t,animation:r="border",size:s,as:a="div",className:i,...l},o)=>{e=(0,g.vE)(e,"spinner");let c=`${e}-${r}`;return(0,n.jsx)(a,{ref:o,...l,className:d()(i,c,s&&`${c}-${s}`,t&&`text-${t}`)})});N.displayName="Spinner";var C=r(3839),M=r(1387),_=r(6704),E=r(105),B=r(4072),A=r(1118),$=r(8092),P=r(7925),R=r(420),D=r(7608);function F(){var e,t;let r=(0,i.I0)(),c=(0,s.useSearchParams)(),[d,h]=(0,a.useState)(!0),[u,g]=(0,a.useState)(void 0),[x,f]=(0,a.useState)(void 0),[p,j]=(0,a.useState)(void 0),[v,b]=(0,a.useState)(void 0),[k,m]=(0,a.useState)(void 0),[_,F]=(0,a.useState)([]),[I,L]=(0,a.useState)({stakesBreakdown:{},signersWeight:{}});(0,a.useEffect)(()=>{let e;let t=c.get(B.W),n=Number(c.get("epoch"));f(t),j(n),(0,o.checkUrl)(t)?Number.isInteger(n)||(e="invalidEpoch"):e="invalidAggregatorUrl",void 0===e?(fetch("".concat(t,"/signers/registered/").concat(n)).then(e=>200===e.status?e.json():{}).then(e=>{b(e.signing_at),F(e.registrations),L({stakesBreakdown:(0,l.computeStakeShapesDataset)(e.registrations),signersWeight:(0,l.computeSignersWeightDataset)(e.registrations)}),h(!1)}).catch(e=>{b(void 0),F([]),h(!1),console.error("Fetch registrations error:",e)}),fetch("".concat(t,"/epoch-settings")).then(e=>200===e.status?e.json():{}).then(e=>m(null==e?void 0:e.epoch)).catch(e=>{m(void 0),console.error("Fetch current epoch in epoch-settings error:",e)}),r((0,A.Q9)(t))):g(e)},[c]);let T=(0,a.useCallback)(e=>{let t=new URLSearchParams;return t.set("aggregator",x),t.set("epoch",e),"/registrations?".concat(t.toString())},[x]),U=T(p-1),W=T(k),O=T(p+1);if(void 0!==u){let e="";switch(u){case"invalidEpoch":e="The given epoch isn't an integer, please correct it and try again.";break;case"invalidAggregatorUrl":e="The given aggregator isn't a valid url, please correct it and try again.";break;default:e="Something went wrong"}return(0,n.jsxs)(C.Z,{gap:3,children:[(0,n.jsx)("h2",{children:"Registrations"}),(0,n.jsxs)(y,{variant:"danger",children:[(0,n.jsx)(y.Heading,{children:"Oh snap! You got an error!"}),(0,n.jsx)("p",{children:e})]})]})}return(0,n.jsxs)(C.Z,{gap:3,children:[(0,n.jsxs)("h2",{children:["Registrations"," ",(0,n.jsx)(R.Z,{href:"".concat(x,"/signers/registered/").concat(p),variant:"outline-light",size:"sm"})]}),(0,n.jsx)(S.Z,{children:(0,n.jsx)(M.Z,{children:(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:"Aggregator:"})}),(0,n.jsx)("td",{children:x})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:"Registration epoch:"})}),(0,n.jsx)("td",{children:p})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:"Signing at epoch:"})}),(0,n.jsx)("td",{children:null!=v?v:"?"})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:"Number of signers:"})}),(0,n.jsx)("td",{children:null!==(e=null==_?void 0:_.length)&&void 0!==e?e:0})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:"Total stakes:"})}),(0,n.jsx)("td",{children:(0,n.jsx)(P.Z,{lovelace:null!==(t=null==_?void 0:_.reduce((e,t)=>e+t.stake,0))&&void 0!==t?t:0})})]})]})})}),(0,n.jsx)(S.Z,{children:(0,n.jsx)("div",{children:Number.isInteger(p)&&(0,n.jsxs)(Z,{children:[(0,n.jsxs)($.Z,{href:U,children:["Previous Epoch (",p-1,")"]}),(0,n.jsxs)($.Z,{href:W,disabled:void 0===k||k===p,children:["Current Epoch (",k,")"]}),(0,n.jsxs)($.Z,{href:O,disabled:k<=p,children:["Next Epoch (",p+1,")"]})]})})}),d?(0,n.jsx)(N,{animation:"grow"}):void 0===_||0===_.length?(0,n.jsxs)(y,{variant:"info",children:[(0,n.jsxs)(y.Heading,{children:["No registrations for epoch ",p]}),(0,n.jsx)("p",{children:k===p?"The aggregator did not receive registrations yet for the current epoch.":k<p?"The epoch is in the future":"The aggregator may have pruned old registrations or wasn't running at this epoch."})]}):(0,n.jsxs)(S.Z,{children:[(0,n.jsxs)(w.Z,{xs:12,sm:12,md:7,children:[(0,n.jsx)("h3",{children:"Signers"}),(0,n.jsx)(D.Z,{signers:_,aggregator:x,displayIndexes:!0})]}),(0,n.jsx)(w.Z,{xs:12,sm:12,md:5,children:(0,n.jsxs)(C.Z,{gap:3,children:[(0,n.jsx)("h3",{children:"Stakes breakdown"}),(0,n.jsx)(E.$Q,{data:I.stakesBreakdown}),(0,n.jsx)("h3",{children:"Signers weight"}),(0,n.jsx)(E.by,{data:I.signersWeight})]})})]})]})}_.kL.register(_.qi,_.uw,_.f$,_.ZL,_.Dx,_.u,_.De),(0,l.setChartJsDefaults)(_.kL)},851:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(3513);e.exports={computeSignersWeightDataset:function(e){let t=null!=e?e:[];return{labels:t.map(e=>e.party_id),datasets:[{label:"Stake (₳)",data:t.map(e=>(0,n.toAda)(e.stake))}]}},computeStakeShapesDataset:function(e){let t=e=>e/1e12,r=(null!=e?e:[]).map(e=>t(e.stake));return{labels:["< 1M₳","≥ 1M₳ < 10M₳","≥ 10M₳ < 25M₳","≥ 25M₳ < 50M₳","≥ 50M₳ < 75M₳","≥ 75M₳ < 100M₳","≥ 100M₳"],datasets:[{label:"Number of signers",data:[r.filter(e=>e<1).length,r.filter(e=>e>=1&&e<10).length,r.filter(e=>e>=10&&e<25).length,r.filter(e=>e>=25&&e<50).length,r.filter(e=>e>=50&&e<75).length,r.filter(e=>e>=75&&e<100).length,r.filter(e=>e>100).length]}]}},setChartJsDefaults:function(e){let t=["rgba(255, 99, 132, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 205, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(54, 162, 235, 0.2)","rgba(153, 102, 255, 0.2)","rgba(201, 203, 207, 0.2)"],r=["rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(54, 162, 235)","rgb(153, 102, 255)","rgb(201, 203, 207)"];e.defaults.plugins.legend.display=!1,e.defaults.elements.arc.backgroundColor=t,e.defaults.elements.arc.borderColor=r,e.defaults.elements.arc.borderWidth=1,e.defaults.elements.bar.backgroundColor=t,e.defaults.elements.bar.borderColor=r,e.defaults.elements.bar.borderWidth=1}}},8092:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(7437);r(2265);var s=r(1396),a=r.n(s);function i(e){let{href:t,children:r,className:s,disabled:i,...l}=e;return!0===i?s="".concat(s," disabled"):i=!1,(0,n.jsx)(a(),{href:t,"aria-disabled":i,className:"btn btn-primary link-underline-opacity-0 link-light ".concat(s),...l,children:r})}},5410:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(7437);r(2265);var s=r(6716),a=r(7322),i=r(7800);function l(e){let{partyId:t}=e;return(0,n.jsxs)("span",{className:"text-break",children:[t,(0,n.jsx)(n.Fragment,{children:" "}),(0,n.jsx)(a.Z,{overlay:(0,n.jsx)(i.Z,{children:"Copy"}),children:(0,n.jsx)(s.Z,{variant:"link",onClick:function(){window.isSecureContext&&t&&navigator.clipboard.writeText(t).then(()=>{})},size:"md",className:"p-0",children:(0,n.jsx)("i",{className:"bi bi-copy",style:{color:"black"}})})})]})}r(3513)},2538:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n=r(7437),s=r(2265),a=r(3198),i=r(1118),l=r(3513),o=r(6691),c=r.n(o),d=r(7322),h=r(7800);function u(e){var t;let{aggregator:r,partyId:o,...u}=e,g=(0,a.v9)(e=>(0,i.Mj)(e,r,o)),[x,f]=(0,s.useState)(void 0);return(0,s.useEffect)(()=>{(null==g?void 0:g.network)?f((0,l.getCExplorerUrlForPool)(g.network,o)):f(void 0)},[o,g.network]),void 0!==x?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("a",{href:x,target:"_blank",className:"link-dark link-underline-light",children:(0,n.jsx)(d.Z,{overlay:(0,n.jsx)(h.Z,{children:"See in CExplorer"}),children:(0,n.jsxs)("span",{children:[(0,n.jsx)(c(),{src:"/explorer/cexplorer_logo.png",alt:"CExplorer Logo",style:{verticalAlign:"text-top"},width:20,height:20}),(0,n.jsx)(n.Fragment,{children:" "}),null!==(t=g.pool_ticker)&&void 0!==t?t:"Not available"]})})})}):(0,n.jsx)("span",{children:g.pool_ticker})}},420:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(7437);r(2265);var s=r(6716),a=r(7322),i=r(7800);function l(e){return(0,n.jsx)(a.Z,{overlay:(0,n.jsx)(i.Z,{children:"Raw JSON"}),children:(0,n.jsx)(s.Z,{variant:"outline-secondary",target:"_blank",...e,children:(0,n.jsx)("i",{className:"bi bi-filetype-json",style:{color:"black"}})})})}},7608:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(7437);r(2265);var s=r(1387),a=r(5410),i=r(7609),l=r(2538),o=r(7925);function c(e){let{signers:t,aggregator:r,displayIndexes:c,...d}=e;return(0,n.jsxs)(s.Z,{responsive:!0,striped:!0,...d,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[void 0!==c&&(0,n.jsx)("th",{children:"#"}),(0,n.jsx)("th",{children:"Party id"}),(0,n.jsx)("th",{children:"Pool Ticker"}),(0,n.jsx)("th",{style:{textAlign:"end"},children:"Stake"})]})}),(0,n.jsx)("tbody",{children:t.map((e,t)=>(0,n.jsxs)("tr",{children:[!0===c&&(0,n.jsx)("td",{children:t}),(0,n.jsxs)("td",{children:[(0,n.jsx)(i.Z,{tooltip:"Verified Signer"})," ",(0,n.jsx)(a.Z,{partyId:e.party_id})]}),(0,n.jsx)("td",{children:(0,n.jsx)(l.Z,{aggregator:r,partyId:e.party_id})}),(0,n.jsx)("td",{style:{textAlign:"end"},children:(0,n.jsx)(o.Z,{lovelace:e.stake})})]},e.party_id))})]})}},7925:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(7437);r(2265);var s=r(7322),a=r(7800),i=r(3513);function l(e){let{lovelace:t}=e;return(0,n.jsx)(s.Z,{overlay:(0,n.jsxs)(a.Z,{children:[(0,i.formatCurrency)((0,i.toAda)(t),20),"₳"]}),children:(0,n.jsx)("span",{children:(0,i.formatStake)(t)})})}},7609:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(7437);r(2265);var s=r(7322),a=r(7800);function i(e){return(0,n.jsx)(s.Z,{overlay:(0,n.jsx)(a.Z,{children:e.tooltip}),children:(0,n.jsx)("a",{href:"#",className:"badge bg-success",children:(0,n.jsx)("i",{className:"bi bi-shield-lock"})})})}},4072:function(e,t,r){"use strict";r.d(t,{W:function(){return n}});let n="aggregator"},1118:function(e,t,r){"use strict";r.d(t,{Mj:function(){return o},Q9:function(){return i},Ux:function(){return a}});var n=r(64),s=r(6023);let a=(0,n.oM)({name:"pools",initialState:{list:[]},reducers:{},extraReducers:e=>e.addCase(i.fulfilled,(e,t)=>{if(t.payload.keep_cached_data)return;let r=l(e,t.payload.aggregator);r?(r.network=t.payload.network,r.pools=t.payload.pools,r.date=t.payload.date):e.list.push({aggregator:t.payload.aggregator,date:t.payload.date,network:t.payload.network,pools:t.payload.pools})})}),i=(0,n.hg)("pools/updateForAggregator",(e,t)=>{var r;let n=t.getState(),s=l(n.pools,e),a=Date.now(),i=a-(null!==(r=null==s?void 0:s.date)&&void 0!==r?r:0);return i>216e5?fetch("".concat(e,"/signers/tickers")).then(e=>200===e.status?e.json():{}).then(t=>{var r;return{aggregator:e,date:a,network:t.network,pools:null!==(r=t.signers)&&void 0!==r?r:[]}}):{keep_cached_data:!0}}),l=(e,t)=>e.list.find(e=>e.aggregator===t),o=(0,s.P1)([e=>e.pools,(e,t,r)=>({aggregator:t,poolId:r})],(e,t)=>{let r=l(e,t.aggregator),n=null==r?void 0:r.pools.find(e=>e.party_id===t.poolId);return{network:null==r?void 0:r.network,...n}});a.reducer},3513:function(e){"use strict";let t=e=>e/1e6,r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.toLocaleString(void 0,{maximumFractionDigits:t})};e.exports={checkUrl:function(e){try{return new URL(e),!0}catch(e){return!1}},formatStake:function(e){let n=t(e),s=[{suffix:"B",value:1e9},{suffix:"M",value:1e6},{suffix:"K",value:1e3},{suffix:"",value:1}].find(e=>Math.abs(n)>=e.value-.001);return s?"".concat(r(n/s.value)).concat(s.suffix,"₳"):"".concat(r(n),"₳")},toAda:t,formatCurrency:r,formatBytes:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";let r=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,r)).toFixed(t<0?0:t))+" "+["Bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"][r]},formatPartyId:function(e){return("string"==typeof e||e instanceof String)&&e.length>15?e.slice(0,10)+"…"+e.slice(-5):e},getCExplorerUrlForPool:function(e,t){let r;let n="cexplorer.io/pool/".concat(t);switch(e){case"mainnet":r="https://".concat(n);break;case"preprod":r="https://preprod.".concat(n);break;case"preview":r="https://preview.".concat(n)}return r}}}},function(e){e.O(0,[674,621,167,971,472,744],function(){return e(e.s=3195)}),_N_E=e.O()}]);